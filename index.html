<!-- Script para cargar productos desde JSON y hacer tarjetas clicables -->
<script>
  async function cargarProductos() {
    try {
      const response = await fetch('products.json');
      if (!response.ok) {
        throw new Error('No se pudo cargar products.json');
      }
      const productos = await response.json();
      
      const grid = document.getElementById('productos-grid');
      grid.innerHTML = ''; // Limpiamos

      if (productos.length === 0) {
        grid.innerHTML = '<p style="grid-column: 1 / -1; font-size: 1.4rem; opacity: 0.7;">No hay productos disponibles por el momento...</p>';
        return;
      }

      productos.forEach(producto => {
        const card = document.createElement('div');
        card.className = 'card';
        card.style.cursor = 'pointer';

        card.innerHTML = `
          <img src="${producto.imagen}" alt="${producto.nombre}" loading="lazy">
          <p>${producto.nombre}<br><strong>${producto.precio}</strong></p>
        `;

        // Al hacer clic en toda la tarjeta, abre WhatsApp con imagen incluida
        card.addEventListener('click', () => {
          const baseUrl = 'https://tech1sonix.github.io/techsonix/';  // Tu dominio GitHub Pages
          const imagenUrl = baseUrl + producto.imagen;  // Ej: https://tech1sonix.github.io/techsonix/img/producto1.png

          const mensaje = `Hola! 游땙 Me interesa este producto que vi en tu p치gina:\n\n` +
                          `*${producto.nombre}*\n` +
                          `Precio: ${producto.precio}\n\n` +
                          `Aqu칤 la imagen:\n${imagenUrl}\n\n` +
                          `쮼st치 disponible? 쮺u치nto ser칤a con env칤o a Bogot치?`;

          const url = `https://wa.me/573102868697?text=${encodeURIComponent(mensaje)}`;
          window.open(url, '_blank');
        });

        grid.appendChild(card);
      });
    } catch (error) {
      console.error('Error al cargar los productos:', error);
      const grid = document.getElementById('productos-grid');
      grid.innerHTML = '<p style="grid-column: 1 / -1; color: #ff5555; font-size: 1.3rem;">Error al cargar los productos. Revisa products.json</p>';
    }
  }

  // Ejecutar cuando la p치gina cargue
  window.addEventListener('DOMContentLoaded', cargarProductos);
</script>
